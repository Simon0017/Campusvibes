// Function to add a message to the chat history
function addMessageToChatHistory(messageData) {
    const chatHistory = document.querySelector('.chat-history ul');
    const { message, sender, timestamp } = messageData;
    
    const messageItem = document.createElement('li');
    messageItem.classList.add('clearfix');

    const time = document.createElement('div');
    time.classList.add('message-data');
    
    const message = document.createElement('span');
    message.classList.add('message-data-time');
    message.textContent = timestamp;
    time.appendChild(message);

    const messageContent = document.createElement('div');
    messageContent.classList.add('message');
    if (sender === '{{ name }}') {
        messageItem.classList.add('float-right');
        messageContent.classList.add('my-message');
    } else {
        messageContent.classList.add('other-message');
    }
    messageContent.textContent = message;
    
    messageItem.appendChild(time);
    messageItem.appendChild(messageContent);
    
    chatHistory.appendChild(messageItem);
}

// Function to handle incoming messages from the WebSocket
function handleIncomingMessage(data) {
    const messageData = JSON.parse(data);
    addMessageToChatHistory(messageData);
}

// Function to send a message via WebSocket
function sendMessage(message) {
    if (!chatSocket || chatSocket.readyState !== WebSocket.OPEN) {
        console.error('WebSocket is not connected.');
        return;
    }
    chatSocket.send(JSON.stringify({
        "message": message,
    }));
}

// Event listener for sending a message when clicking the send button
chatMessageSend.addEventListener('click', function() {
    const messageInput = document.querySelector('#message');
    const message = messageInput.value.trim();
    if (message) {
        sendMessage(message);
        messageInput.value = '';
    }
});

// Event listener for sending a message when pressing Enter key
chatInput.addEventListener('keyup', function(e) {
    if (e.keyCode === 13) {
        const messageInput = document.querySelector('#message');
        const message = messageInput.value.trim();
        if (message) {
            sendMessage(message);
            messageInput.value = '';
        }
    }
});

// Establish WebSocket connection
connect();



                                <li class="clearfix">
                                    <div class="message-data text-right">
                                        <span class="message-data-time">10:10 AM, Today</span>
                                        <img src="https://bootdey.com/img/Content/avatar/avatar7.png" alt="avatar">
                                    </div>
                                    <div class="message other-message float-right"> Hi Aiden, how are you? How is the project coming along? </div>
                                </li>
                                <li class="clearfix">
                                    <div class="message-data">
                                        <span class="message-data-time">10:12 AM, Today</span>
                                    </div>
                                    <div class="message my-message">Are we meeting today?</div>                                    
                                </li>                               
                                <li class="clearfix">
                                    <div class="message-data">
                                        <span class="message-data-time">10:15 AM, Today</span>
                                    </div>
                                    <div class="message my-message">Project has been already finished and I have results to show you.</div>
                                </li>



                                // Create a new list item element
var listItem = document.createElement("li");
listItem.className = "clearfix";

// Create the inner div for message data with the "text-right" class
var messageDataDiv = document.createElement("div");
messageDataDiv.className = "message-data text-right";

// Create the span element for the message data time
var messageDataTimeSpan = document.createElement("span");
messageDataTimeSpan.className = "message-data-time";
messageDataTimeSpan.textContent = "10:10 AM, Today";

// Append the span to the message data div
messageDataDiv.appendChild(messageDataTimeSpan);

// Create the image element for the avatar
var avatarImg = document.createElement("img");
avatarImg.src = "https://bootdey.com/img/Content/avatar/avatar7.png";
avatarImg.alt = "avatar";

// Append the image to the message data div
messageDataDiv.appendChild(avatarImg);

// Create the div for the message with the "other-message" and "float-right" classes
var messageDiv = document.createElement("div");
messageDiv.className = "message other-message float-right";
messageDiv.textContent = "Hi Aiden, how are you? How is the project coming along?";

// Append the message data div and message div to the list item
listItem.appendChild(messageDataDiv);
listItem.appendChild(messageDiv);

// Append the list item to the parent element where you want to display the messages
var chatHistory = document.querySelector(".chat-history ul");
chatHistory.appendChild(listItem);
